---
import type { Resource } from '@lib/supabase';
import { truncate } from '@lib/utils';
import type { Language } from '@lib/i18n';

interface Props {
  resource: Resource;
  lang: Language;
}

const { resource, lang } = Astro.props;
---

<a
  href={`/${lang}/resources/${resource.slug}`}
  class="card block hover:shadow-lg transition-shadow"
  data-testid="resource-card"
>
  {resource.cover_image_url && (
    <img
      src={resource.cover_image_url}
      alt={resource.title}
      class="w-full h-48 object-cover rounded-lg mb-4"
      loading="lazy"
    />
  )}
  <h3 class="text-xl font-bold mb-2">{resource.title}</h3>
  {resource.excerpt && (
    <p class="text-gray-600 mb-4">{truncate(resource.excerpt, 150)}</p>
  )}
  {resource.keypoints && resource.keypoints.length > 0 && (
    <ul class="space-y-1 text-sm text-gray-500">
      {resource.keypoints.slice(0, 3).map((point) => (
        <li>â€¢ {point}</li>
      ))}
    </ul>
  )}
</a>

